{"ast":null,"code":"export default class HttpQueue {\n  constructor(queryFunction) {\n    this.requesting = false;\n    this.stack = [];\n    this.queryFunction = queryFunction;\n  }\n\n  add(options) {\n    if (this.stack.length < 2) {\n      return new Promise((resolve, reject) => {\n        this.stack.push({\n          options,\n          resolve,\n          reject\n        });\n        this.makeQuery();\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      this.stack[1] = {\n        options,\n        resolve,\n        reject\n      };\n      this.makeQuery();\n    });\n  }\n\n  makeQuery() {\n    if (!this.stack.length || this.requesting) {\n      return null;\n    }\n\n    this.requesting = true;\n    this.queryFunction(this.stack[0].options).then(response => {\n      this.stack[0].resolve(response);\n      this.requesting = false;\n      this.stack.splice(0, 1);\n      this.makeQuery();\n    }).catch(error => {\n      this.stack[0].reject(error);\n      this.requesting = false;\n      this.stack.splice(0, 1);\n      this.makeQuery();\n    });\n  }\n\n}","map":{"version":3,"sources":["/Volumes/Godown/Riafy/frontend/src/components/home/searchHelper/HttpQueue.js"],"names":["HttpQueue","constructor","queryFunction","requesting","stack","add","options","length","Promise","resolve","reject","push","makeQuery","then","response","splice","catch","error"],"mappings":"AAAA,eAAe,MAAMA,SAAN,CAAgB;AAE3BC,EAAAA,WAAW,CAAEC,aAAF,EAAiB;AAC1B,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKF,aAAL,GAAqBA,aAArB;AACD;;AAEDG,EAAAA,GAAG,CAAEC,OAAF,EAAW;AACZ,QAAI,KAAKF,KAAL,CAAWG,MAAX,GAAoB,CAAxB,EAA2B;AACzB,aAAO,IAAIC,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACvC,aAAKN,KAAL,CAAWO,IAAX,CAAgB;AACdL,UAAAA,OADc;AAEdG,UAAAA,OAFc;AAGdC,UAAAA;AAHc,SAAhB;AAKA,aAAKE,SAAL;AACD,OAPM,CAAP;AAQD;;AACD,WAAO,IAAIJ,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACvC,WAAKN,KAAL,CAAW,CAAX,IAAgB;AACdE,QAAAA,OADc;AAEdG,QAAAA,OAFc;AAGdC,QAAAA;AAHc,OAAhB;AAKA,WAAKE,SAAL;AACD,KAPM,CAAP;AASD;;AAEDA,EAAAA,SAAS,GAAI;AACX,QAAI,CAAE,KAAKR,KAAL,CAAWG,MAAb,IAAuB,KAAKJ,UAAhC,EAA4C;AAC1C,aAAO,IAAP;AACD;;AAED,SAAKA,UAAL,GAAkB,IAAlB;AAEA,SAAKD,aAAL,CAAmB,KAAKE,KAAL,CAAW,CAAX,EAAcE,OAAjC,EAA0CO,IAA1C,CAA+CC,QAAQ,IAAI;AACzD,WAAKV,KAAL,CAAW,CAAX,EAAcK,OAAd,CAAsBK,QAAtB;AACA,WAAKX,UAAL,GAAkB,KAAlB;AACA,WAAKC,KAAL,CAAWW,MAAX,CAAkB,CAAlB,EAAqB,CAArB;AACA,WAAKH,SAAL;AACD,KALD,EAKGI,KALH,CAKSC,KAAK,IAAI;AAChB,WAAKb,KAAL,CAAW,CAAX,EAAcM,MAAd,CAAqBO,KAArB;AACA,WAAKd,UAAL,GAAkB,KAAlB;AACA,WAAKC,KAAL,CAAWW,MAAX,CAAkB,CAAlB,EAAqB,CAArB;AACA,WAAKH,SAAL;AACD,KAVD;AAWD;;AAhD0B","sourcesContent":["export default class HttpQueue {\n\n    constructor (queryFunction) {\n      this.requesting = false\n      this.stack = []\n      this.queryFunction = queryFunction\n    }\n  \n    add (options) {\n      if (this.stack.length < 2) {\n        return new Promise ((resolve, reject) => {\n          this.stack.push({\n            options,\n            resolve,\n            reject\n          })\n          this.makeQuery()\n        })\n      }\n      return new Promise ((resolve, reject) => {\n        this.stack[1] = {\n          options,\n          resolve,\n          reject\n        }\n        this.makeQuery()\n      })\n  \n    }\n  \n    makeQuery () {\n      if (! this.stack.length || this.requesting) {\n        return null\n      }\n  \n      this.requesting = true\n  \n      this.queryFunction(this.stack[0].options).then(response => {\n        this.stack[0].resolve(response)\n        this.requesting = false\n        this.stack.splice(0, 1)\n        this.makeQuery()\n      }).catch(error => {\n        this.stack[0].reject(error)\n        this.requesting = false\n        this.stack.splice(0, 1)\n        this.makeQuery()\n      })\n    }\n  }"]},"metadata":{},"sourceType":"module"}